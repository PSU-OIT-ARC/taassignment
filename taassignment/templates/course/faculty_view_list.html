{% extends "base.html" %}

{% block page_title %}Main Page - TA Assignment Form{% endblock %}

{% block content %}
<script type="text/javascript" src="{{ STATIC_URL }}bootstrap-3.1.1-dist/js/panel.js"></script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}bootstrap-3.1.1-dist/css/panel.css">

<script type="text/javascript" src="{{ STATIC_URL }}select2-3.4.6/select2.js"></script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}select2-3.4.6/select2-bootstrap.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}select2-3.4.6/select2.css">
<script type="text/javascript">
   
    $(document).ready(function() {
        $(".id_tas").select2({
            placeholder: "Type in to select a TA",
            allowClear: true,
        });
   })    
</script>
    <h3>Your current classes</h3>
    <p>Introduction goes here!</p>
        {% if messages %}
            {% for message in messages %}
            <div class="alert alert-success">
                {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}Important: {% endif %}
                {{ message }}
            </div>
            {% endfor %}
        {% endif %}
        {% if has_courses %}
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <table class="table table-hover" id="course-table">
                <thead class="text-dark-green">
                    <tr>
                        <th class="col-md-2">Course no.</th>
                        <th class="col-md-4">Course name</th>
                        <th class="col-md-3">Teacher</th>
                        <th class="col-md-3">Number of TA</th>
                    </tr>
                </thead>
                <tr id="search_box">
                    <td colspan="12">
                    <input type="text" class="form-control" id="course-table-filter" data-action="filter" data-filters="#course-table" placeholder="Filter Courses" /></td>
                </tr>
                {% for course in courses %}
                <tr>
                    <td class="col-md-2">{{ course.course_no }}</td>
                    <td class="col-md-4">{{ course.course_name }}</td>
                    <td class="col-md-3">{% for faculty in course.faculties.all %}
                            {{ faculty }}<br/>
                        {% endfor %}
                    </td>
                    <td class="col-md-3">
                        <div  class="form-group">
                            <select multiple="multiple" class="id_tas form-control col-md-1" id="id_tas" name="tas_{{ course.id }}" tabindex="-1" style="width: 300px">
                            {%for ta in tas %}
                                {% if ta in course.tas.all %}
                                    <option value="{{ ta.id }}" selected>{{ ta.get_full_name }}</option>
                                {% else %}
                                    <option value="{{ ta.id }}">{{ ta.get_full_name }}</option>
                                {% endif %}
                            {% endfor %}
                            </select>
                            
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </table>
            <button class="btn btn-primary" type="submit" value="Save" >Save</button>
        </form>
        {% else %}
        <h4><br/>There is no class available at the moment. Contact admin to add courses</h4>
    </div>

    {% endif %}
{% endblock %}
